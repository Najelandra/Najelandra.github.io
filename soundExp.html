<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh; /* full screen height */
      margin: 0;
      background: #111;
    }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/addons/p5.sound.min.js"></script>
  </head>
  <body>
    <script>
      
      let fft;
      let w;
      
      function setup() {
        createCanvas(256, 256);
        colorMode(HSB);
        angleMode(DEGREES);
    
        micro = new p5.AudioIn();
        micro.start();
        // Set smoothing to 0.9, 256 bins
        fft = new p5.FFT(0.9, 256);
        fft.setInput(micro);
        w = width / 64;
      }
           
      function draw() {
        background(0);
        let spectrum = fft.analyze();
        let lowMidE = fft.getEnergy("lowMid"); 
        console.log(lowMidE);
        // stroke(255);
        for (let i = 0; i < spectrum.length; i++) {
          let ampl = spectrum[i];
          fill(i, 255, 255);
          let y = map(ampl, 0, 256, height, 0);
          rect(i*w, y, w, height - y);
        }
        if (frameCount % 30 === 0 && window.AppInventor) {
          window.AppInventor.setWebViewString(lowMidE);
        }
      }
    </script>
  </body>
</html>




















